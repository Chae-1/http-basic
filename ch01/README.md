인터넷 네트워크
==

## 인터넷 통신
- 컴퓨터 두대가 서로 선으로 연결돼 있는 경우, 케이블을 통해 데이터를 주고 받으면 된다.
- 멀리 떨어져있는 컴퓨터와 통신하려면 인터넷을 통해 전송해야한다.
- 인터넷은 수 많은 컴퓨터들이 서로 연결돼있는 형태로 존재한다.
  - 인터넷에 연결된 컴퓨터를 `노드`라 한다.
- 목적지까지 안전하게 도착하는 것이 필요하다.

### IP(인터넷 프로토콜)
서로 데이터를 주고 받기 위해서는 주소를 식별할 수 있어야한다. 이를 `IP 주소`라 한다.

이때 주고 받는 통신 단위를 패킷(Packet)이라고 한다.

- IP 패킷은 `출발지 IP`, `목적지 IP`, `데이터` 등등으로 구성돼 있다.
- 목적지까지 인터넷의 수많은 노드를 거쳐 목적지까지 전달된다.

IP만으로는 문제점이 존재한다.

**문제점**
- **비연결성**
  - 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송이 된다.
  - 목적지까지 도달되도 목적지가 서비스 불능인 상태일 경우의 문제
- **비신뢰성**
  - 중간에 패킷이 사라지거나, 패킷이 순서대로 안오는 문제가 있다.
  - 패킷이 중간 노드에서 소실되는 경우의 문제를 해결해야한다.
  - 패킷을
- **프로그램 구분**
  - 목적지까지 전달된다해도, 어떤 프로그램에서 요청한지 알 수 없다.
이 문제점들로 인해 TCP가 등장했다.

### TCP, UDP
TCP는 IP 프로토콜에서 발생하는 상기 문제들을 해결해줄 수 있는 프로토콜이다.

인터넷 프로토콜은 4계층을 이루고 있다.
1. 애플리케이션 계층 - HTTP, FTP
   - 애플리케이션을 통해 상대방에게 메세지를 보내면 Socket을 통해 전송 계층으로 전달한다.
2. 전송 계층 - TCP, UDP
   - 애플리케이션 계층의 메시지를 전달받아서 TCP 정보를 패키징한다. 
3. 인터넷 계층 - IP
   - TCP 데이터를 전달받아서 IP 정보로 감싼 후 전달한다.  
4. 네트워크 인터페이스 계층 
   - 상대 주소로 전송한다.

**IP 패킷 정보**
IP 패킷안에는 TCP 관련 정보가 포함된다.
- 출발지 IP, 목적지 IP, TCP 관련정보가 포함된다.

TCP 관련정보에는 `출발지 Port 번호`, `목적지 Port 번호`, `전송 제어`, `순서 제어` 등이 포함된다.

**TCP(Transmission Control Protocol) 특징**
- 연결지향 - Three way handShake
- 데이터의 전달 보증`
- 데이터의 도착 순서 보장

현재 대부분 TCP를 사용한다.

### Three way handshake

TCP에서 클라이언트와 서버간 신뢰성있는 데이터를 전송하기 위한 절차. 
직접 연결되는 것이 아닌, 가상으로 연결된다.

- `SYN` : 연결 요청 패킷, 서버와 클라이언트간 연결을 위한 패킷
- `ACK` : 요청 확인 응답 패킷, 서버와 클라이언트간 패킷을 정상적을 수신했을 때 상대측으로 보내는 패킷

**Three way handshake 절차**
1. 클라이언트에서 서버로 연결을 위해 `SYN` 패킷을 전송한다.
2. 정상적으로 `SYN` 패킷을 전달 받은 서버는 클라이언트에 `ACK + SYN` 패킷을 전송한다.
3. 클라이언트가 `ACK` 패킷을 서버로 전송하면 연결이 체결된다.

이렇게 연결되면 다음과 같은 장점을 얻는다.
- 데이터 전달을 보증한다.
  - `ACK` 패킷을 통해 수신여부를 확인할 수 있기때문이다.
- 순서를 보장한다.
  - 순서 번호를 통해 서버에서 패킷을 재조립 할 수있다.


### UDP(User Datagram Protocol)
TCP와 다르게 동작하는 전송 계층의 프로토콜이다.
- TCP와 다르게 Three way handshake가 존재하지 않는다.
  - 그래서, TCP의 장점을 누릴 수없다.
- 데이터 전달을 보장하지 않고, 순서를 보장하지도 않는다.
다만, 도착지의 애플리케이션을 구분하기 위한 Port 번호와 체크섬이 IP 패킷에 추가 된다. 


## Port
IP를 통해 목적지에 도달해도 동시에 여러 개의 어플리케이션을 실행하는 것이 보통인 요즘 어디로 데이터를 전송할지 알 수 없다.
어플리케이션을 구분할 수 있는 주소가 필요한데, 이를 Port 번호라고 한다.

Port 번호는 0 ~ 65535번 까지 할당가능하다.

하지만, 이미 할당돼 있는 Port번호가 존재하는데 이를 `Well-known` 포트라고 한다. 대표적으로는 다음과 같다.
- `ftp` : 20, 21
- `telnet` : 23
- `http` : 80
- `https` : 443

## DNS(Domain Name System)
IP 주소는 기억하기 힘들고, 변경될 수 있다.
- 고정적이며 기억하기 쉬운 주소가 필요하다.

사람들이 이해하기 쉽고, IP 주소로 변환할 수 있는 고정적인 주소가 필요하다.
이런 주소를 `도메인`이라고 한다.
- ex) naver.com, daum.com

DNS는 `도메인`과 IP 주소를 1:1로 등록하고 도메인을 호출했을 때 IP 주소를 반환하는 시스템이다.


