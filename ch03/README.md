Http 기본
==
## HTTP(HyperText Transfer Protocol)
하이퍼텍스트 문서를 주고받기 위한 프로토콜로 설계됐지만, 지금은 모든 것을 전송할 수 있을 수 있다.
- 파일, 영상, 음성, XML, JSON(API)
- TCP를 직접 연결하는 경우에는 게임 서버같은 경우
- 서버간에 데이터를 주고받을 때에도 Http을 사용한다.

HTTP/1.1, HTTP/2는 TCP를 기반 프로토콜로 사용하지만, HTTP/3은 UDP을 사용한다.

### HTTP 특징
- 클라이언트 서버 구조
- 무상태 프로토콜, 비연결성
- HTTP 메세지
- 단순하고 확장 가능하다.

### 클라이언트-서버 구조
클라이언트가 서버에 요청을 보내고 서버는 그 요청에 응답하는 구조를 가진다.

### 무상태 프로토콜(Stateless)
서버가 클라이언트의 상태를 보존하지 않는 특징을 갖는다.
- Stateful인 경우, 이전 요청에 대한 데이터를 갖고 있다.
  - 즉, 클라이언트의 모든 상태를 가지고 있는다.
  - 클라이언트는 항상 같은 서버에 요청을 보내야한다.
- Stateless인 경우, 이전 요청에 대한 데이터를 갖지 않는다.
  - 즉, 요청시 모든 상태를 전달해야한다.
  - 클라이언트는 다른 서버에 요청을 보내도 원하는 결과를 얻을 수 있다.

상태를 유지하지 않는 특징으로 응답 서버를 쉽게 바꿀 수 있다.

**한계**

- 무상태로 설계할 수 없는 경우도 존재한다.
- 상태를 유지해야하는 로그인같은 경우는 다른 방법을 사용해야한다.
  - 브라우저 쿠키나 서버 세션등을 사용해서 유지
- 상태 유지는 최소한으로 사용해야한다.
웹 어플리케이션 설계 시, 최대한 Stateless로 설계하고, 어쩔 수 없을 경우만 Stateful로 설계


### 비연결성(conectless)
TCP는 연결을 유지하는 특징을 가진다.
- 여러 클라이언트가 동시에 서버에 요청을 한다면, 이 연결을 모두 유지해야한다.

연결성을 가지면 굉장히 많은 자원을 소비하지만, HTTP는 비연결성이라는 특징을 가진다.

비연결성은 다음과 같은 장점을 갖고
- 서버의 자원을 효율적으로 사용할 수 있다. 
- 초 단위이하의 빠른 응답이 가능하다.

다음과 같은 단점이 있다.
- TCP/IP를 HTTP 요청마다 새로 연결을 맺어야 한다.

현재는 지속 연결로 문제를 해결했다. 지속 연결은 일정 시간동안 더 이상 요청이 없을 때까지 연결을 유지하는 연결방식이다. 


### HTTP 메세지 
HTTP는 요청 메시지와 응답 메세지의 구조가 다르다.

하지만 공통적으로 HTTP 메시지 구조는 `start-line`, `header`, `message body`로 구성돼있다.

##### 요청 메시지
요청 메시지의 `start-line`은 `request-line`라고 부른다.
 - `request-line`에는 HTTP 메서드와 요청 대상 그리고 현재 사용중인 HTTP 버전 정보가 존재한다.
  - HTTP 메서드는 서버가 수행해야 할 동작을 지정하는 것이다.
  - 요청 대상은 절대 경로와 쿼리로 지정한다.

응답 메세지의 `start-line`은 `status-line`라고 부른다.
- HTTP 버전과, 상태 코드, 이유 문구로 구성돼있다.

`header`에는 HTTP 전송에 필요한 부가 정보가 존재한다.
- field-name : field-value 로 구성돼있다.

메시지 바디에는 실제 전송할 데이터를 담아 메시지를 전송한다.



